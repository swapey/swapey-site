<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Swapey DEX | Direct Swap</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts style arcade / cartoon -->
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">

<style>
/* === FOND AVEC LOGOS SWAPEY === */
body {
  margin: 0;
  background-color: #16002d;
  background-image: 
    url('swapey-logo.png'), 
    url('swapey-logo.png'),
    url('swapey-logo.png'),
    url('swapey-logo.png'),
    url('swapey-logo.png');
  background-repeat: no-repeat;
  background-position: 5% 10%, 70% 20%, 40% 60%, 80% 75%, 20% 85%;
  background-size: 150px 150px;
  font-family: 'Luckiest Guy', cursive;
  color: white;
  text-align: center;
  position: relative;
}
.overlay {
  position: absolute;
  top:0; left:0; right:0; bottom:0;
  background: rgba(22,0,45,0.35); /* assombrit le fond pour lisibilit√© */
  z-index: 0;
}
header, .swap-form, #wallet, #event-countdown, .announcement-box {
  position: relative; z-index: 1;
}

/* === HEADER ET TEXTE === */
h1, p, #event-countdown, .announcement-box h2 {
  font-family: 'Luckiest Guy', cursive;
  text-shadow: 2px 2px 4px #000;
}
h1 { font-size: 3.8rem; margin: 10px 0; }
p { font-size: 1.2rem; color: #ffffffcc; max-width:720px; margin:auto; }
#event-countdown { font-size:1.8rem; color:#40E0D0; margin:20px 0; }

/* === WARNING === */
.warning {
  background: rgba(255, 165, 0, 0.15);
  border: 1px solid orange;
  padding: 12px;
  border-radius: 12px;
  margin: 30px auto;
  width: fit-content;
}

/* === BOUTONS DESSIN ANIME === */
.btn-cartoon {
  background: linear-gradient(135deg, #40E0D0, #8F5BFF);
  border: 4px solid #fff;
  color: #fff;
  font-weight: bold;
  font-size: 1.2rem;
  padding: 18px 36px;
  margin: 12px;
  border-radius: 24px;
  cursor: pointer;
  text-transform: uppercase;
  box-shadow: 0 0 12px #40E0D0, 0 0 24px #8F5BFF, 0 0 36px #40E0D0;
  transition: all 0.3s ease-in-out;
}
.btn-cartoon:hover {
  transform: scale(1.15) rotate(-2deg);
  box-shadow: 0 0 24px #40E0D0, 0 0 48px #8F5BFF, 0 0 72px #40E0D0;
}
.btn-cartoon:active {
  transform: scale(0.95) rotate(1deg);
  box-shadow: 0 0 10px #40E0D0, 0 0 20px #8F5BFF, 0 0 30px #40E0D0;
}

/* === FORM SWAP === */
.swap-form {
  margin: 40px auto;
  width: 420px;
  max-width: 95%;
  padding: 20px;
  border-radius: 24px;
  background: rgba(0,0,0,0.25);
  box-shadow: 0 0 40px rgba(64,224,208,0.5), 0 0 40px rgba(143,91,255,0.5);
  text-align: left;
}
.swap-form label { display: block; margin: 10px 0 5px; }
.swap-form input, .swap-form select {
  width: 100%; padding: 8px; border-radius: 12px; border: none; font-size: 1rem;
}

/* === POPUP CONFIRMATION === */
#confirm {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, #40E0D0, #8F5BFF);
  padding: 16px 32px;
  border-radius: 16px;
  font-weight: bold;
  color: black;
  font-size: 1.2rem;
  display: none;
  box-shadow: 0 0 25px #40E0D0, 0 0 50px #8F5BFF;
  animation: flash 0.5s ease-in-out;
}
@keyframes flash {
  0% { transform: translateX(-50%) scale(0.8); opacity: 0; }
  50% { transform: translateX(-50%) scale(1.1); opacity: 1; }
  100% { transform: translateX(-50%) scale(1); opacity: 1; }
}

/* === ANNOUNCEMENT BOX === */
.announcement-box {
  margin: 40px auto;
  width: 90%;
  max-width: 720px;
  padding: 16px 24px;
  border-radius: 16px;
  background: rgba(64,224,208,0.15);
  border: 2px solid #40E0D0;
  text-align: left;
  color: white;
  box-shadow: 0 0 20px #40E0D0, 0 0 40px #8F5BFF;
}
.announcement-box h2 { text-align:center; font-size:1.6rem; margin-bottom:12px; }
.announcement-box ul { list-style:none; padding:0; margin:0; max-height:150px; overflow-y:auto; }
.announcement-box li { margin-bottom:6px; font-size:1rem; }
</style>
</head>

<body>
<div class="overlay"></div>

<header>
  <img src="swapey-logo.png" alt="Swapey Logo" />
  <h1>Swapey DEX</h1>
  <p>Swap hundreds of tokens instantly on Polygon using Swapey interface.</p>
</header>

<div id="event-countdown">
  Announcement in: <span id="countdown">Loading...</span>
</div>

<div class="warning">‚ö†Ô∏è Polygon Network only</div>

<div id="wallet">
  <button class="btn-cartoon" onclick="connectWallet()">Connect MetaMask</button>
  <div id="address" class="address"></div>
</div>

<div class="swap-form">
  <label>From Token:</label>
  <select id="tokenA">
    <option value="0x0000000000000000000000000000000000001010">MATIC</option>
    <option value="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174">USDC</option>
    <option value="0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063">DAI</option>
    <option value="0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619">WETH</option>
    <option value="0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6">WBTC</option>
    <option value="0x831753DD7087CaC61aB5644b308642cc1c33Dc13">QUICK</option>
    <option value="0xdAC17F958D2ee523a2206206994597C13D831ec7">USDT</option>
    <option value="0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270">WMATIC</option>
  </select>

  <label>To Token:</label>
  <select id="tokenB">
    <option value="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174">USDC</option>
    <option value="0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063">DAI</option>
    <option value="0x0000000000000000000000000000000000001010">MATIC</option>
    <option value="0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619">WETH</option>
    <option value="0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6">WBTC</option>
    <option value="0x831753DD7087CaC61aB5644b308642cc1c33Dc13">QUICK</option>
  </select>

  <label>Amount:</label>
  <input type="number" id="amount" placeholder="Enter amount" />

  <button class="btn-cartoon" onclick="swapTokens()">Swap</button>
  <div id="status" class="status"></div>
</div>

<div id="confirm">‚úÖ Swap Successful!</div>

<div class="announcement-box">
  <h2>Live Crypto News</h2>
  <ul id="crypto-news">
    <li>BTC just surged 5% in the last hour!</li>
    <li>ETH staking rewards increase announced</li>
    <li>Polygon network upgrade happening soon</li>
    <li>New token listing on Swapey DEX!</li>
  </ul>
</div>

<footer>
  Swapey is decentralized. Use at your own risk.
</footer>

<script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
<script>
let provider, signer;

async function connectWallet() {
  if(window.ethereum){
    provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = provider.getSigner();
    const address = await signer.getAddress();
    document.getElementById("address").innerText = "Connected: " + address;
    document.getElementById("status").innerText = "";
  } else { alert("MetaMask not detected"); }
}

async function swapTokens(){
  if(!signer){ alert("Connect MetaMask first"); return; }

  const tokenA = document.getElementById("tokenA").value;
  const tokenB = document.getElementById("tokenB").value;
  const amount = document.getElementById("amount").value;

  if(!amount || amount<=0){ alert("Enter a valid amount"); return; }

  const routerAddress = "0xa5E0829CaCED8fFdd4De3c43696c57F7D7A678ff";
  const routerABI = ["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)"];
  const router = new ethers.Contract(routerAddress, routerABI, signer);

  try{
    const path = [tokenA, tokenB];
    const to = await signer.getAddress();
    const deadline = Math.floor(Date.now()/1000)+60*20;

    const tx = await router.swapExactTokensForTokens(
      ethers.utils.parseUnits(amount, 18), 0, path, to, deadline
    );
    document.getElementById("status").innerText = "Transaction sent: " + tx.hash;
    await tx.wait();

    const confirm = document.getElementById("confirm");
    confirm.style.display = "block";
    setTimeout(()=>{ confirm.style.display = "none"; }, 3500);

    document.getElementById("status").innerText = "Swap successful: " + tx.hash;
  } catch(e){
    console.error(e);
    document.getElementById("status").innerText = "Swap failed: " + e.message;
  }
}

// Countdown
const eventDate = new Date("2026-01-26T20:00:00");
function updateCountdown(){
  const now = new Date();
  const diff = eventDate - now;
  if(diff<=0){
    document.getElementById("countdown").innerText = "The announcement is live! üéâ";
    clearInterval(countdownInterval);
    return;
  }
  const days=Math.floor(diff/(1000*60*60*24));
  const hours=Math.floor((diff/(1000*60*60))%24);
  const minutes=Math.floor((diff/(1000*60))%60);
  const seconds=Math.floor((diff/1000)%60);
  document.getElementById("countdown").innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
}
updateCountdown();
const countdownInterval=setInterval(updateCountdown,1000);
</script>

</body>
</html>
