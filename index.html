<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Swapey DEX</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Luckiest Guy', cursive;
  background:#120022;
  color:white;
  text-align:center;
}

#ticker{
  position:fixed;
  top:0;
  width:100%;
  background:#1a0033;
  padding:8px 0;
  font-size:0.9rem;
  color:#40E0D0;
  text-align:center;
  z-index:10;
}

#top-right{
  position:fixed;
  top:44px;
  right:14px;
  display:flex;
  align-items:center;
  gap:12px;
  z-index:11;
}

#connect-btn{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 14px;
  border-radius:14px;
  background:linear-gradient(135deg,#40E0D0,#8F5BFF);
  color:black;
  cursor:pointer;
  font-size:0.9rem;
}

#connect-btn img{
  width:22px;
}

header{
  padding-top:90px;
}

header img{
  width:300px;
  max-width:85%;
}

.swap-box{
  max-width:420px;
  margin:40px auto;
  padding:20px;
  border-radius:24px;
  background:linear-gradient(135deg,#2a004f,#4d00a0);
  box-shadow:0 0 20px #40E0D0,0 0 40px #8F5BFF;
}

select,input{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:12px;
  border:none;
  font-family:'Luckiest Guy', cursive;
  font-size:1rem;
  text-align:center;
}

input{color:black;}

#swapey-btn{
  margin-top:16px;
  background:none;
  border:none;
  font-size:3rem;
  cursor:pointer;
  color:white;
  text-shadow:
    0 0 8px #40E0D0,
    0 0 16px #8F5BFF;
  transition:0.3s;
}

#swapey-btn:hover{
  transform:scale(1.1);
  text-shadow:
    0 0 14px #40E0D0,
    0 0 28px #8F5BFF;
}

#wallet{
  max-width:420px;
  margin:30px auto;
  padding:16px;
  border-radius:18px;
  background:rgba(64,224,208,0.1);
  box-shadow:0 0 20px #40E0D0;
  font-size:0.9rem;
}
</style>
</head>

<body>

<div id="ticker">Loading pricesâ€¦</div>

<div id="top-right">
  <div id="connect-btn" onclick="connectPhantom()">
    <img src="phantom.png">
    <span id="wallet-text">Connect Wallet</span>
  </div>
</div>

<header>
  <img src="swapey.png">
  <h2>Fast â€¢ Fun â€¢ Decentralized</h2>
</header>

<div class="swap-box">
  <select id="from"></select>
  <input type="number" placeholder="Enter amount">
  <select id="to"></select>
  <button id="swapey-btn" onclick="comingSoon()">Swapey</button>
</div>

<div id="wallet">
  <div id="wallet-status">Not connected</div>
  <div id="wallet-balance"></div>
</div>

<script src="https://unpkg.com/@solana/web3.js@1.73.0/lib/index.iife.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@solana/spl-token-registry@0.2.10/dist/index.iife.js"></script>

<script>
const from=document.getElementById("from");
const to=document.getElementById("to");

async function loadTokens(){
  const list = await new splTokenRegistry.TokenListProvider().resolve();
  const tokens = list.filter(t=>t.chainId===101).slice(0,100);

  tokens.forEach(t=>{
    from.innerHTML+=`<option>${t.symbol}</option>`;
    to.innerHTML+=`<option>${t.symbol}</option>`;
  });
}
loadTokens();

async function connectPhantom(){
  if(!window.solana?.isPhantom){
    alert("Install Phantom Wallet");
    return;
  }

  const r = await window.solana.connect();
  const pk = r.publicKey.toString();

  document.getElementById("wallet-text").innerText =
    pk.slice(0,4)+"â€¦"+pk.slice(-4);

  const conn = new solanaWeb3.Connection(
    solanaWeb3.clusterApiUrl("mainnet-beta")
  );
  const bal = await conn.getBalance(r.publicKey);

  document.getElementById("wallet-status").innerText="Connected";
  document.getElementById("wallet-balance").innerText =
    "SOL: "+(bal/1e9).toFixed(4);
}

function comingSoon(){
  alert("Real swap coming soon via Jupiter ðŸš€");
}

async function ticker(){
  const r=await fetch(
    "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=usd"
  );
  const d=await r.json();
  document.getElementById("ticker").innerText =
    `BTC $${d.bitcoin.usd} | ETH $${d.ethereum.usd} | SOL $${d.solana.usd}`;
}
ticker();
setInterval(ticker,10000);
</script>

</body>
</html>
